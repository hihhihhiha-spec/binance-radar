import ccxt
import time

# ุฅุนุฏุงุฏ ุงูุงุชุตุงู ุจููุตุฉ ุจุงูููุณ
exchange = ccxt.binance()

def check_pattern(symbol, timeframe):
    try:
        # ุฌูุจ ุขุฎุฑ 3 ุดููุน (ูุญุชุงุฌ ุงูุดูุนุชูู ุงูุฃุฎูุฑุชูู ุงูููุชููุชูู)
        ohlcv = exchange.fetch_ohlcv(symbol, timeframe, limit=3)
        if len(ohlcv) < 3: return None
        
        # ุงูุดูุนุฉ ุงูุฃููู (ุงููุจู ุงูุฃุฎูุฑุฉ)
        open_1, high_1, low_1, close_1 = ohlcv[0][1], ohlcv[0][2], ohlcv[0][3], ohlcv[0][4]
        # ุงูุดูุนุฉ ุงูุซุงููุฉ (ุงูุฃุฎูุฑุฉ ุงูููุชููุฉ)
        open_2, high_2, low_2, close_2 = ohlcv[1][1], ohlcv[1][2], ohlcv[1][3], ohlcv[1][4]

        # 1. ุดุฑุท ุงูููู: ูุฌุจ ุฃู ุชููู ุงูุดูุนุชุงู ุญูุฑุงููู (ุงูุฅุบูุงู ุฃูู ูู ุงูุงูุชุชุงุญ)
        if close_1 < open_1 and close_2 < open_2:
            
            # ุญุณุงุจ ุงูุฃุฌุณุงู ูุงูุฐููู ููุดูุนุฉ ุงูุซุงููุฉ
            body_2 = open_2 - close_2
            upper_wick_2 = high_2 - open_2
            lower_wick_2 = close_2 - low_2
            
            # 2. ุดุฑุท ูุณุฑ ุงููุงุน: ุฅุบูุงู ุงูุซุงููุฉ ุฃูู ูู ุฐูู ุงูุฃููู
            if close_2 < low_1:
                
                # 3. ุดุฑุท ุงูุฐููู: ุงูุฌุณู ุฃูุจุฑ ูู ูุฌููุน ุงูุฐููู
                if body_2 > (upper_wick_2 + lower_wick_2):
                    
                    # 4. ุงูุดุฑุท ุงูุฌุฏูุฏ: ุงูุฐูู ุงูุณููู ุฃุทูู ูู ุงูุฐูู ุงูุนููู
                    if lower_wick_2 > upper_wick_2:
                        return True
    except:
        return None
    return False

# ูุตูููุฉ ุงูุนููุงุช ูุงููุฑููุงุช ููุง ูู ุนูุฏู
symbols = ['BTC/USDT', 'ETH/USDT', 'SOL/USDT', 'AVAX/USDT'] # ููููู ุฅุถุงูุฉ ุงููุงุฆูุฉ ูุงููุฉ ููุง
timeframes = ['5m', '15m', '1h', '4h']

print("๐ ุงูุทูุงู ุงูุฑุงุฏุงุฑ ุงููุทูุฑ (ุดุฑุท ุงูุฐููู ุงูุณููู)...")

while True:
    for tf in timeframes:
        print(f"๐ ูุญุต ุฅุทุงุฑ {tf} ุงูุขู...")
        for sym in symbols:
            if check_pattern(sym, tf):
                print(f"๐ฏ ูุฑุตุฉ ุฐูุจูุฉ: {sym} ({tf}) - ุดูุนุชุงู ุญูุฑุงูุงู + ูุณุฑ ูุงุน + ุฐูู ุณููู ููู")
        time.sleep(1) 
    
    print("๐ค ุฏูุฑุฉ ูุญุต ูุงููุฉ ุงูุชูุช. ุงูุชุธุงุฑ ุฏูููุชูู...")
    time.sleep(120) # ููุช ุงูุงุณุชุฑุงุญุฉ ูููุน ุงูุญุธุฑ [cite: 2026-01-21]
